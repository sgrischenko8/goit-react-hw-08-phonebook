{"version":3,"file":"static/js/382.7f0bbb0d.chunk.js","mappings":"yMACA,EAAkC,wCAAlC,EAA+F,2C,UCKzFA,EAAgB,CAAEC,KAAM,GAAIC,MAAO,GAAIC,SAAU,IAE1CC,EAAiB,SAAC,GAAuC,IAArCC,EAAoC,EAApCA,aAAcC,EAAsB,EAAtBA,gBACvCC,GAAWC,EAAAA,EAAAA,MAMjB,OACE,SAAC,KAAD,CACER,cAAeA,EACfS,SACwB,cAAtBF,EAASG,SAA2BJ,EAAkBD,EAH1D,UAME,UAAC,KAAD,CAAMM,UAAWC,EAAjB,UACyB,cAAtBL,EAASG,WACR,iCACE,kBAAOG,QAAQ,OAAf,SAAsB,WACtB,SAAC,KAAD,CACEC,KAAK,OACLb,KAAK,OACLc,QAAQ,yCACRC,UAAU,IACVC,MAAM,qJAKZ,kBAAOJ,QAAQ,QAAf,SAAuB,YACvB,SAAC,KAAD,CACEC,KAAK,QACLb,KAAK,QACLc,QAAQ,gCACRE,MAAM,kGAGR,kBAAOJ,QAAQ,WAAf,SAA0B,eAC1B,SAAC,KAAD,CACEC,KAAK,WACLb,KAAK,WACLc,QAAQ,2BACRC,UAAU,IACVC,MAAM,qEAER,gBAAKN,UAAWC,EAAhB,UACE,SAACM,EAAA,EAAD,CAAQC,QA1ChB,WAEC,EAwCO,SACyB,cAAtBZ,EAASG,SAA2B,UAAY,iBAM5D,C,qCC5CD,IAdqB,SAAC,GAAe,IAAbU,EAAY,EAAZA,MACD,MAAjBA,EAAMC,QAAmBD,EAAME,KAAKC,SAIhB,OAApBH,EAAME,KAAKE,MACbC,EAAAA,GAAAA,MAAY,sBAEO,MAAjBL,EAAMC,QAAsC,OAApBD,EAAME,KAAKE,MACrCC,EAAAA,GAAAA,MAAY,oBAPZA,EAAAA,GAAAA,MAAY,8BAUf,C,qLCbD,EAAiC,iC,UCuCjC,EA/BiB,WACf,IAAMC,GAAWC,EAAAA,EAAAA,MACjB,GAAoDC,EAAAA,EAAAA,MAApD,eAAOC,EAAP,YAAmBC,EAAnB,EAAmBA,UAAWV,EAA9B,EAA8BA,MAAOW,EAArC,EAAqCA,UAM/BzB,EAAe,mCAAG,WAAM0B,GAAN,0FAEdH,EAASG,GAAQC,MAAK,SAAAC,GAC1BR,GAASS,EAAAA,EAAAA,IAASD,EAAIZ,KAAKc,OAC5B,IAJmB,sDAMpBC,QAAQC,IAAR,MANoB,wDAAH,sDAUrB,OACE,iCACE,iBAAK3B,UAAWC,EAAhB,WACE,wBAAI,eACJ,SAACR,EAAA,EAAD,CAAgBE,gBAAiBA,OAElCc,IAAS,SAACmB,EAAA,EAAD,CAAcnB,MAAOA,IAC9BW,QApBHN,EAAAA,GAAAA,QAAc,+BAqBXK,IAAa,SAACU,EAAA,EAAD,MAGnB,C","sources":["webpack://react-homework-template/./src/components/CredentialForm/CredentialForm.module.css?aeb7","components/CredentialForm/CredentialForm.js","components/ErrorMessage/ErrorMessage.js","webpack://react-homework-template/./src/pages/Register/Register.module.css?12fc","pages/Register/Register.js"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"credential_form\":\"CredentialForm_credential_form__fsrFe\",\"form_btn_container\":\"CredentialForm_form_btn_container__RXcWi\"};","import { Formik, Form, Field } from 'formik';\nimport { Button } from 'components/Button/Button';\nimport { useLocation } from 'react-router-dom';\nimport PropTypes from 'prop-types';\nimport styles from './CredentialForm.module.css';\n\nconst initialValues = { name: '', email: '', password: '' };\n\nexport const CredentialForm = ({ loginHandler, registerHandler }) => {\n  const location = useLocation();\n\n  function dummyClick() {\n    return;\n  }\n\n  return (\n    <Formik\n      initialValues={initialValues}\n      onSubmit={\n        location.pathname === '/register' ? registerHandler : loginHandler\n      }\n    >\n      <Form className={styles.credential_form}>\n        {location.pathname === '/register' && (\n          <>\n            <label htmlFor=\"name\">Name:</label>\n            <Field\n              type=\"text\"\n              name=\"name\"\n              pattern=\"['a-zA-Z\\u0400-\\u04ff0-9\\s\\W+\\.]+\"\n              minLength=\"2\"\n              title=\"Name may contain only letters, apostrophe, dash, dots and spaces. For example Adrian, Jacob Mercer, Charles de Batz de Castelmore d'Artagnan\"\n            />\n          </>\n        )}\n\n        <label htmlFor=\"email\">Email:</label>\n        <Field\n          type=\"email\"\n          name=\"email\"\n          pattern=\"^([^ ]+@[^ ]+\\.[a-z]{2,6}|)$\"\n          title=\"E-mail may contain only letters, digits, At sign and dot. For example JacobMercer2@gmail.com\"\n        />\n\n        <label htmlFor=\"password\">Password:</label>\n        <Field\n          type=\"password\"\n          name=\"password\"\n          pattern=\"['a-zA-Z\\d\\s\\W+\\.]+.\"\n          minLength=\"6\"\n          title=\"Password number may contain letters, digits, spaces and symbols\"\n        />\n        <div className={styles.form_btn_container}>\n          <Button onClick={dummyClick}>\n            {location.pathname === '/register' ? 'Sign Up' : 'Log In'}\n          </Button>\n        </div>\n      </Form>\n    </Formik>\n  );\n};\n\nCredentialForm.propTypes = {\n  loginHandler: PropTypes.func,\n  registerHandler: PropTypes.func,\n};\n","import toast from 'react-hot-toast';\n\nconst ErrorMessage = ({ error }) => {\n  if (error.status === 400 && !error.data.message) {\n    toast.error('E-mail and password not fit');\n    return;\n  }\n  if (error.data.code === 11000) {\n    toast.error('Your access denied');\n  }\n  if (error.status === 400 && error.data.code !== 11000) {\n    toast.error('Fill all fields');\n    return;\n  }\n};\n\nexport default ErrorMessage;\n","// extracted by mini-css-extract-plugin\nexport default {\"main_container\":\"Register_main_container__q2ABb\"};","import { useDispatch } from 'react-redux';\nimport { setToken } from 'redux/auth/tokenSlice';\nimport { useRegisterMutation } from 'redux/auth/authSlice';\nimport { CredentialForm } from 'components/CredentialForm/CredentialForm';\nimport Loader from 'components/Loader/Loader';\nimport toast from 'react-hot-toast';\nimport ErrorMessage from 'components/ErrorMessage/ErrorMessage';\nimport styles from './Register.module.css';\n\nconst Register = () => {\n  const dispatch = useDispatch();\n  const [register, { isLoading, error, isSuccess }] = useRegisterMutation();\n\n  const showCongrats = () => {\n    toast.success('You successfully registered');\n  };\n\n  const registerHandler = async values => {\n    try {\n      await register(values).then(res => {\n        dispatch(setToken(res.data.token));\n      });\n    } catch (e) {\n      console.log(e);\n    }\n  };\n\n  return (\n    <>\n      <div className={styles.main_container}>\n        <h1>Phonebook</h1>\n        <CredentialForm registerHandler={registerHandler} />\n      </div>\n      {error && <ErrorMessage error={error} />}\n      {isSuccess && showCongrats()}\n      {isLoading && <Loader />}\n    </>\n  );\n};\n\nexport default Register;\n"],"names":["initialValues","name","email","password","CredentialForm","loginHandler","registerHandler","location","useLocation","onSubmit","pathname","className","styles","htmlFor","type","pattern","minLength","title","Button","onClick","error","status","data","message","code","toast","dispatch","useDispatch","useRegisterMutation","register","isLoading","isSuccess","values","then","res","setToken","token","console","log","ErrorMessage","Loader"],"sourceRoot":""}